{% extends "admin/base_admin.html" %}

{% block content %}
<div class="max-w-2xl space-y-6">
  <!-- Header -->
  <div>
    <h1 class="text-2xl font-semibold tracking-tight text-slate-900">Add Deposit (Held)</h1>
    <p class="mt-1 text-sm text-slate-500">
      Create a deposit that stays in <span class="font-semibold text-slate-900">Transit</span> until released.
    </p>
  </div>

  <!-- Card -->
  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <form method="post" class="space-y-5">
      {% csrf_token %}

      <!-- Account -->
      <div class="space-y-1.5">
        <label for="account_id" class="text-sm font-semibold text-slate-700">Account</label>

        <div class="relative">
          <select
            id="account_id"
            name="account_id"
            class="w-full appearance-none rounded-xl border border-slate-200 bg-white px-3 py-2.5 pr-10 text-sm text-slate-900 shadow-sm outline-none focus:border-slate-300 focus:ring-4 focus:ring-slate-100"
          >
            {% for acc in accounts %}
            <option value="{{ acc.id }}">
              {{ acc.customer.username }} â€” {{ acc.currency }}
            </option>
            {% endfor %}
          </select>

          <!-- chevron -->
          <span class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-slate-400">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="m6 9 6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
        </div>

        <p class="text-xs text-slate-500">Select the customer account that will receive the deposit.</p>
      </div>

      <!-- Amount -->
      <div class="space-y-1.5">
        <label for="amount" class="text-sm font-semibold text-slate-700">Amount</label>
        <div class="relative">
          <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400">
            <!-- dollar icon -->
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 2v20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M17 6.5c0-1.93-2.24-3.5-5-3.5S7 4.57 7 6.5 9.24 10 12 10s5 1.57 5 3.5S14.76 17 12 17s-5-1.57-5-3.5"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          <input
            id="amount"
            name="amount"
            placeholder="e.g. 1500.00"
            inputmode="decimal"
            required
            class="w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 shadow-sm outline-none placeholder:text-slate-400 focus:border-slate-300 focus:ring-4 focus:ring-slate-100"
          />
        </div>
      </div>

      <!-- Reference -->
      <div class="space-y-1.5">
        <label for="reference" class="text-sm font-semibold text-slate-700">Reference</label>
        <div class="relative">
          <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400">
            <!-- tag icon -->
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M20 13l-7 7-11-11V2h7l11 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 7h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </span>
          <input
            id="reference"
            name="reference"
            placeholder="e.g. DEP001"
            required
            class="w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 shadow-sm outline-none placeholder:text-slate-400 focus:border-slate-300 focus:ring-4 focus:ring-slate-100"
          />
        </div>
        <p class="text-xs text-slate-500">Use a unique internal reference for auditing.</p>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-3 pt-1">
        <button
          type="submit"
          class="inline-flex items-center justify-center rounded-xl bg-bankBlue px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:opacity-95 focus:outline-none focus:ring-4 focus:ring-slate-100"
        >
          Create Deposit (Held)
        </button>

        <a href="{% url 'admin_account_list' %}"
           class="inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-4 focus:ring-slate-100">
          Cancel
        </a>
      </div>

      <!-- Note -->
      <div class="rounded-xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800">
        <span class="font-semibold">Note:</span> Held deposits stay in <span class="font-semibold">Transit</span> until you release them from the Accounts page.
      </div>
    </form>
  </div>
</div>
{% endblock %}
